cmake_minimum_required(VERSION 3.22)
project(Pathfinding LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Force static CRT on MSVC
if(MSVC)
    # /MT for Release, /MTd for Debug
    set(CMAKE_MSVC_RUNTIME_LIBRARY "MultiThreaded$<$<CONFIG:Debug>:Debug>" CACHE STRING "" FORCE)
endif()

# Define SFML_STATIC for static linking
add_definitions(-DSFML_STATIC)

# SFML 3.x
find_package(SFML CONFIG REQUIRED COMPONENTS Graphics System)

# Include directories
include_directories(${PROJECT_SOURCE_DIR}/Project/include)

# Source files
file(GLOB_RECURSE SOURCES "${PROJECT_SOURCE_DIR}/Project/src/*.cpp")

# Create executable
add_executable(pathfinding ${SOURCES})

# Link static SFML libraries
target_link_libraries(pathfinding PRIVATE
    sfml-graphics-s
    sfml-system-s
)